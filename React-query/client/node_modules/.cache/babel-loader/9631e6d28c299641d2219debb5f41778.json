{"ast":null,"code":"// src/removable.ts\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n\n  destroy() {\n    this.clearGcTimeout();\n  }\n\n  scheduleGc() {\n    this.clearGcTimeout();\n\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(this.gcTime || 0, newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3));\n  }\n\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n\n};\nexport { Removable };","map":{"version":3,"mappings":";AAAA,SAASA,QAAT,EAAmBC,cAAnB,QAAyC,YAAzC;AAEO,IAAeC,YAAf,MAAyB;EAE9B;;EAEAC,UAAgB;IACd,KAAKC,cAAL;EACF;;EAEUC,aAAmB;IAC3B,KAAKD,cAAL;;IAEA,IAAIH,eAAe,KAAKK,MAApB,CAAJ,EAAiC;MAC/B,KAAK,UAAL,GAAkBC,WAAW,MAAM;QACjC,KAAKC,cAAL;MACF,CAFkB,EAEf,KAAKF,MAFU,CAAlB;IAGF;EACF;;EAEUG,aAAaC,SAAb,EAAkD;IAE1D,KAAKJ,MAAL,GAAcK,KAAKC,GAAL,CACZ,KAAKN,MAAL,IAAe,CADH,EAEZI,cAAcV,WAAWa,QAAX,GAAsB,IAAI,EAAJ,GAAS,GAA7C,CAFY,CAAd;EAIF;;EAEUT,iBAAiB;IACzB,IAAI,KAAK,UAAT,EAAqB;MACnBU,aAAa,KAAK,UAAlB;MACA,KAAK,UAAL,GAAkB,MAAlB;IACF;EACF;;AA/B8B,CAAzB","names":["isServer","isValidTimeout","Removable","destroy","clearGcTimeout","scheduleGc","gcTime","setTimeout","optionalRemove","updateGcTime","newGcTime","Math","max","Infinity","clearTimeout"],"sources":["/Users/kartikaypratapsingh/Desktop/React_tut/React-query/client/node_modules/@tanstack/query-core/src/removable.ts"],"sourcesContent":["import { isServer, isValidTimeout } from './utils'\n\nexport abstract class Removable {\n  gcTime!: number\n  #gcTimeout?: ReturnType<typeof setTimeout>\n\n  destroy(): void {\n    this.clearGcTimeout()\n  }\n\n  protected scheduleGc(): void {\n    this.clearGcTimeout()\n\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove()\n      }, this.gcTime)\n    }\n  }\n\n  protected updateGcTime(newGcTime: number | undefined): void {\n    // Default to 5 minutes (Infinity for server-side) if no gcTime is set\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1000),\n    )\n  }\n\n  protected clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout)\n      this.#gcTimeout = undefined\n    }\n  }\n\n  protected abstract optionalRemove(): void\n}\n"]},"metadata":{},"sourceType":"module"}